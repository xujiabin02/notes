# LoRAå®Œå…¨æŒ‡å—ï¼šä»åŸç†åˆ°ComfyUIå®æˆ˜

> æ·±å…¥ç†è§£LoRAæ¨¡å‹åŠå…¶åœ¨AIå›¾åƒç”Ÿæˆä¸­çš„åº”ç”¨
> æ›´æ–°æ—¶é—´: 2025-11-10

---

## ğŸ“Œ ä»€ä¹ˆæ˜¯LoRAï¼Ÿ

### å®šä¹‰

**LoRA (Low-Rank Adaptation)** = ä½ç§©é€‚é…

ä¸€ç§**è½»é‡çº§çš„AIæ¨¡å‹å¾®è°ƒæŠ€æœ¯**ï¼Œå¯ä»¥åœ¨ä¸é‡æ–°è®­ç»ƒæ•´ä¸ªå¤§æ¨¡å‹çš„æƒ…å†µä¸‹ï¼Œè®©æ¨¡å‹å­¦ä¹ æ–°çš„é£æ ¼ã€è§’è‰²æˆ–æ¦‚å¿µã€‚

### é€šä¿—ç†è§£

æƒ³è±¡ä¸€ä¸‹ï¼š
- ğŸ« **åŸºç¡€æ¨¡å‹**ï¼šåƒæ˜¯ä¸€æ‰€å¤§å­¦ï¼ˆStable Diffusionï¼‰
- ğŸ“š **LoRA**ï¼šåƒæ˜¯ä¸€é—¨é€‰ä¿®è¯¾ï¼ˆåŠ¨æ¼«é£æ ¼ã€ç‰¹å®šè§’è‰²ï¼‰
- ğŸ“ **åŠ è½½LoRA**ï¼šå­¦ç”Ÿé€‰ä¿®è¿™é—¨è¯¾åï¼Œè·å¾—äº†é¢å¤–çš„ä¸“ä¸šæŠ€èƒ½

---

## ğŸ¯ æ ¸å¿ƒç‰¹ç‚¹

### 1. **æå°çš„æ–‡ä»¶ä½“ç§¯**

| æ¨¡å‹ç±»å‹ | æ–‡ä»¶å¤§å° | è¯´æ˜ |
|---------|---------|------|
| **å®Œæ•´æ¨¡å‹** | 2-7 GB | Stable DiffusionåŸºç¡€æ¨¡å‹ |
| **LoRAæ¨¡å‹** | 10-200 MB | åªå­˜å‚¨å¢é‡å˜åŒ– |
| **å¾®å‹LoRA** | <10 MB | ç®€å•é£æ ¼é€‚é… |

**ä¼˜åŠ¿**ï¼š
- âœ… å¿«é€Ÿä¸‹è½½å’Œåˆ†äº«
- âœ… å¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªLoRA
- âœ… ä¸å ç”¨å¤§é‡å­˜å‚¨ç©ºé—´

---

### 2. **è®­ç»ƒæˆæœ¬ä½**

| è®­ç»ƒæ–¹å¼ | è®­ç»ƒæ•°æ® | è®­ç»ƒæ—¶é—´ | æ˜¾å­˜éœ€æ±‚ | æˆæœ¬ |
|---------|---------|---------|---------|------|
| **å®Œæ•´å¾®è°ƒ** | æ•°åƒ-æ•°ä¸‡å¼  | æ•°å¤©-æ•°å‘¨ | 40GB+ | $$$$$ |
| **LoRAè®­ç»ƒ** | 10-100å¼  | æ•°å°æ—¶-1å¤© | 12-24GB | $$$ |

**é€‚ç”¨åœºæ™¯**ï¼š
- âœ… ä¸ªäººè‰ºæœ¯å®¶è®­ç»ƒè‡ªå·±çš„é£æ ¼
- âœ… å¿«é€ŸåŸå‹å’Œå®éªŒ
- âœ… å•†ä¸šå®šåˆ¶åŒ–éœ€æ±‚

---

### 3. **çµæ´»ç»„åˆ**

```
åŸºç¡€æ¨¡å‹ (SD 1.5)
  + LoRA 1 (åŠ¨æ¼«é£æ ¼) å¼ºåº¦ 0.8
  + LoRA 2 (ç‰¹å®šè§’è‰²) å¼ºåº¦ 1.0
  + LoRA 3 (é«˜æ¸…ç»†èŠ‚) å¼ºåº¦ 0.5
  = å®šåˆ¶åŒ–çš„ç”Ÿæˆæ•ˆæœ
```

---

## ğŸ”¬ æŠ€æœ¯åŸç†

### ä¼ ç»Ÿå¾®è°ƒ vs LoRA

#### **ä¼ ç»Ÿå®Œæ•´å¾®è°ƒ**
```python
# æ›´æ–°æ‰€æœ‰å‚æ•°ï¼ˆæ•°åäº¿ä¸ªï¼‰
for layer in model:
    layer.weight = layer.weight + learning_rate * gradient

# é—®é¢˜ï¼š
# - éœ€è¦å­˜å‚¨å®Œæ•´æ¨¡å‹å‰¯æœ¬
# - è®­ç»ƒæ—¶é—´é•¿
# - èµ„æºæ¶ˆè€—å¤§
```

#### **LoRAå¾®è°ƒ**
```python
# åªæ·»åŠ å°çš„"é€‚é…å™¨"çŸ©é˜µ
original_weight = W  # å†»ç»“ï¼Œä¸æ”¹å˜
lora_A = small_matrix_A  # å¯è®­ç»ƒ
lora_B = small_matrix_B  # å¯è®­ç»ƒ

# æ¨ç†æ—¶ï¼š
output = (W + lora_A @ lora_B) @ input

# ä¼˜åŠ¿ï¼š
# - åªè®­ç»ƒAå’ŒBï¼ˆå‚æ•°å°‘1000å€ï¼‰
# - åŸæ¨¡å‹ä¸å˜
# - å¯ä»¥å åŠ å¤šä¸ªLoRA
```

---

### æ•°å­¦åŸç†ï¼ˆç®€åŒ–ç‰ˆï¼‰

```
åŸå§‹æƒé‡çŸ©é˜µ: W âˆˆ R^(dÃ—k)  (ä¾‹å¦‚ 4096Ã—4096)

LoRAåˆ†è§£:
  Î”W = B Ã— A
  å…¶ä¸­:
    A âˆˆ R^(rÃ—k)  (ä¾‹å¦‚ 4Ã—4096)
    B âˆˆ R^(dÃ—r)  (ä¾‹å¦‚ 4096Ã—4)
    r << d, k     (ræ˜¯ç§©ï¼Œé€šå¸¸4-32)

æœ€ç»ˆæƒé‡:
  W' = W + Î± Ã— (B Ã— A)

Î±: ç¼©æ”¾å› å­ï¼ˆå¼ºåº¦ï¼‰
```

**ä¸ºä»€ä¹ˆé«˜æ•ˆï¼Ÿ**
- åŸå§‹å‚æ•°ï¼š4096 Ã— 4096 = **16,777,216**
- LoRAå‚æ•°ï¼š(4096 Ã— 4) + (4 Ã— 4096) = **32,768**
- å‡å°‘äº† **512å€**ï¼

---

## ğŸ¨ LoRAçš„åŠŸèƒ½å’Œç”¨é€”

### 1. **é£æ ¼è¿ç§»**

è®­ç»ƒLoRAå­¦ä¹ ç‰¹å®šè‰ºæœ¯é£æ ¼ï¼š

| LoRAç±»å‹ | æ•ˆæœ | è®­ç»ƒæ•°æ®ç¤ºä¾‹ |
|---------|------|-------------|
| **åŠ¨æ¼«é£æ ¼** | Ghibliã€æ–°æµ·è¯šé£æ ¼ | å®«å´éªç”µå½±æˆªå›¾ |
| **ç»˜ç”»é£æ ¼** | æ²¹ç”»ã€æ°´å½©ã€ç´ æ | ç‰¹å®šç”»å®¶ä½œå“ |
| **æ‘„å½±é£æ ¼** | èƒ¶ç‰‡ã€é»‘ç™½ã€å¤å¤ | ä¸“ä¸šæ‘„å½±ä½œå“ |
| **3Dæ¸²æŸ“** | C4Dã€Blenderé£æ ¼ | 3Dæ¸²æŸ“å›¾ |

**ç¤ºä¾‹**ï¼š
```
Prompt: "a cat in the garden"

æ— LoRA: æ™®é€šå†™å®é£æ ¼çš„çŒ«
+ å‰åœåŠ›LoRA: å®«å´éªåŠ¨ç”»é£æ ¼çš„çŒ«
+ æ²¹ç”»LoRA: å¤å…¸æ²¹ç”»é£æ ¼çš„çŒ«
```

---

### 2. **è§’è‰²ä¸€è‡´æ€§**

è®­ç»ƒLoRAå­¦ä¹ ç‰¹å®šè§’è‰²æˆ–äººç‰©ï¼š

**åº”ç”¨åœºæ™¯**ï¼š
- ğŸ“– **æ¼«ç”»åˆ›ä½œ**ï¼šä¿æŒä¸»è§’å¤–è§‚ä¸€è‡´
- ğŸ® **æ¸¸æˆè®¾è®¡**ï¼šç”ŸæˆåŒä¸€è§’è‰²çš„ä¸åŒå§¿åŠ¿
- ğŸ¬ **è§†é¢‘åˆ¶ä½œ**ï¼šè§’è‰²æ¦‚å¿µè®¾è®¡
- ğŸ¨ **IPå¼€å‘**ï¼šè™šæ‹Ÿå½¢è±¡ç”Ÿæˆ

**ç¤ºä¾‹**ï¼š
```
è®­ç»ƒæ•°æ®: 20å¼ æŸä¸ªè§’è‰²çš„ä¸åŒè§’åº¦ç…§ç‰‡
ç”Ÿæˆæ•ˆæœ:
  - "è§’è‰²åœ¨æµ·è¾¹"
  - "è§’è‰²åœ¨è·‘æ­¥"
  - "è§’è‰²ç©¿ç€è¥¿è£…"
  # æ‰€æœ‰å›¾åƒä¸­çš„è§’è‰²å¤–è§‚ä¸€è‡´
```

---

### 3. **æ¦‚å¿µå­¦ä¹ **

è®©æ¨¡å‹ç†è§£æ–°çš„æ¦‚å¿µæˆ–ç‰©ä½“ï¼š

**ç¤ºä¾‹**ï¼š
- ğŸ¢ ç‰¹å®šå»ºç­‘é£æ ¼ï¼ˆå¦‚"èµ›åšæœ‹å…‹å»ºç­‘"ï¼‰
- ğŸ­ ç‰¹æ®Šæ•ˆæœï¼ˆå¦‚"ç»ç’ƒè´¨æ„Ÿ"ã€"éœ“è™¹å…‰æ•ˆ"ï¼‰
- ğŸ‘— æœè£…æ¬¾å¼ï¼ˆå¦‚"æ±‰æœ"ã€"æ´›ä¸½å¡”"ï¼‰
- ğŸ¦„ è™šæ„ç”Ÿç‰©ï¼ˆå¦‚è‡ªåˆ›çš„æ€ªç‰©è®¾è®¡ï¼‰

---

### 4. **è´¨é‡æå‡**

**Detail Tweaker LoRA**ï¼š
- æå‡ç»†èŠ‚è¡¨ç°
- æ”¹å–„äººç‰©é¢éƒ¨
- å¢å¼ºæ•´ä½“è´¨é‡

**Fix LoRA**ï¼š
- ä¿®å¤æ‰‹éƒ¨é—®é¢˜
- ä¿®å¤çœ¼ç›ç»†èŠ‚
- ä¿®å¤è§£å‰–ç»“æ„

---

### 5. **å§¿åŠ¿æ§åˆ¶**

**Pose LoRA**ï¼š
è®­ç»ƒç‰¹å®šå§¿åŠ¿æˆ–åŠ¨ä½œ

**ç¤ºä¾‹**ï¼š
- æ­¦æœ¯åŠ¨ä½œ
- èˆè¹ˆå§¿åŠ¿
- ç‰¹å®šæ‰‹åŠ¿

---

## ğŸ› ï¸ åœ¨ComfyUIä¸­ä½¿ç”¨LoRA

### åŸºç¡€å·¥ä½œæµ

#### **1. æ ‡å‡†æ–‡ç”Ÿå›¾ + LoRA**

```
å·¥ä½œæµç»“æ„:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Load Checkpoint â”‚ (åŸºç¡€æ¨¡å‹: SD 1.5)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Load LoRA      â”‚ (LoRA: anime_style.safetensors)
â”‚  strength: 0.8  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLIP Text Encodeâ”‚ (Prompt: "a girl in garden")
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    KSampler     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VAE Decode     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         v
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Save Image    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **èŠ‚ç‚¹è¯´æ˜**

```python
# Load LoRA èŠ‚ç‚¹å‚æ•°
{
    "model": æ¥è‡ªLoad Checkpoint,
    "clip": æ¥è‡ªLoad Checkpoint,
    "lora_name": "anime_style.safetensors",
    "strength_model": 0.8,  # å¯¹UNetçš„å½±å“å¼ºåº¦
    "strength_clip": 0.8    # å¯¹CLIPçš„å½±å“å¼ºåº¦
}
```

---

### å¤šLoRAå åŠ 

#### **å·¥ä½œæµï¼šå åŠ 3ä¸ªLoRA**

```
Load Checkpoint
    â”‚
    v
Load LoRA 1 (åŠ¨æ¼«é£æ ¼, å¼ºåº¦ 0.7)
    â”‚
    v
Load LoRA 2 (ç‰¹å®šè§’è‰², å¼ºåº¦ 1.0)
    â”‚
    v
Load LoRA 3 (é«˜æ¸…ç»†èŠ‚, å¼ºåº¦ 0.5)
    â”‚
    v
CLIP Text Encode
    â”‚
    v
KSampler
```

**å åŠ è§„åˆ™**ï¼š
- LoRAæŒ‰é¡ºåºåº”ç”¨
- åé¢çš„LoRAä¼šåœ¨å‰é¢çš„åŸºç¡€ä¸Šå åŠ 
- å¼ºåº¦å¯ä»¥ç‹¬ç«‹æ§åˆ¶

**æ¨èç»„åˆ**ï¼š
```python
# ç¤ºä¾‹1: é«˜è´¨é‡åŠ¨æ¼«è§’è‰²
åŸºç¡€æ¨¡å‹: SD 1.5
  + LoRA 1: anime_style (0.8)
  + LoRA 2: character_alice (1.0)
  + LoRA 3: detail_enhancer (0.5)

# ç¤ºä¾‹2: å†™å®äººåƒ
åŸºç¡€æ¨¡å‹: Realistic Vision
  + LoRA 1: portrait_style (0.7)
  + LoRA 2: face_fix (0.6)
  + LoRA 3: film_grain (0.3)
```

---

### LoRAå¼ºåº¦æ§åˆ¶

#### **å¼ºåº¦å‚æ•°è¯¦è§£**

```python
Load LoRA å‚æ•°:
{
    "strength_model": 0.8,  # UNetå¼ºåº¦
    "strength_clip": 0.8    # CLIPå¼ºåº¦
}
```

| å¼ºåº¦å€¼ | æ•ˆæœ | é€‚ç”¨åœºæ™¯ |
|--------|------|---------|
| **0.0** | æ— æ•ˆæœ | ç¦ç”¨LoRA |
| **0.3-0.5** | å¾®å¼±å½±å“ | è½»å¾®é£æ ¼è°ƒæ•´ |
| **0.6-0.8** | ä¸­ç­‰å½±å“ | å¹³è¡¡æ•ˆæœï¼ˆæ¨èï¼‰ |
| **0.9-1.0** | å¼ºçƒˆå½±å“ | å¼ºé£æ ¼åŒ– |
| **>1.0** | è¿‡åº¦å¼ºåŒ– | å¯èƒ½å´©åï¼Œå®éªŒç”¨ |

#### **è°ƒå‚æŠ€å·§**

```python
# åœºæ™¯1: ä¿ç•™åŸé£æ ¼ï¼Œè½»å¾®è°ƒæ•´
strength_model = 0.4
strength_clip = 0.4

# åœºæ™¯2: å¹³è¡¡é£æ ¼å’Œè´¨é‡
strength_model = 0.7
strength_clip = 0.7

# åœºæ™¯3: å¼ºçƒˆé£æ ¼åŒ–
strength_model = 1.0
strength_clip = 1.0

# åœºæ™¯4: åªå½±å“å›¾åƒï¼Œä¸å½±å“æ–‡æœ¬ç†è§£
strength_model = 0.8
strength_clip = 0.0

# åœºæ™¯5: åªå½±å“æ–‡æœ¬ç†è§£ï¼Œä¸å½±å“å›¾åƒ
strength_model = 0.0
strength_clip = 0.8
```

---

## ğŸ“š å®æˆ˜æ¡ˆä¾‹

### æ¡ˆä¾‹1: ç”Ÿæˆç‰¹å®šé£æ ¼çš„è§’è‰²

**ç›®æ ‡**ï¼šç”Ÿæˆå‰åœåŠ›é£æ ¼çš„çŒ«

**å·¥ä½œæµ**ï¼š
```
1. Load Checkpoint: sd_v1-5.safetensors
2. Load LoRA: ghibli_style.safetensors (å¼ºåº¦ 0.8)
3. Prompt: "a cute white cat sitting in a magical forest,
           ghibli style, soft lighting, warm colors"
4. Negative: "realistic, photo, 3d render"
5. KSampler: steps=20, cfg=7
```

**æ•ˆæœ**ï¼šç”Ÿæˆå®«å´éªåŠ¨ç”»é£æ ¼çš„çŒ«

---

### æ¡ˆä¾‹2: è§’è‰²ä¸€è‡´æ€§ç”Ÿæˆ

**ç›®æ ‡**ï¼šç”ŸæˆåŒä¸€ä¸ªè™šæ‹Ÿè§’è‰²çš„ä¸åŒåœºæ™¯

**æ­¥éª¤**ï¼š

#### **è®­ç»ƒè‡ªå®šä¹‰LoRA**
```python
# å‡†å¤‡æ•°æ®é›†
images/
  â”œâ”€â”€ character_01.jpg  (æ­£é¢)
  â”œâ”€â”€ character_02.jpg  (ä¾§é¢)
  â”œâ”€â”€ character_03.jpg  (èƒŒé¢)
  â”œâ”€â”€ ...
  â””â”€â”€ character_20.jpg

# ä½¿ç”¨Kohya_ssè®­ç»ƒLoRA
# è®­ç»ƒå‚æ•°:
{
    "base_model": "sd_v1-5",
    "resolution": 512,
    "batch_size": 1,
    "epochs": 10,
    "network_dim": 32,  # LoRAç§©
    "learning_rate": 1e-4
}
```

#### **ä½¿ç”¨LoRAç”Ÿæˆ**
```
Load Checkpoint: sd_v1-5
Load LoRA: my_character.safetensors (1.0)

Prompt 1: "mychar, standing in a city street, daylight"
Prompt 2: "mychar, sitting in a cafe, drinking coffee"
Prompt 3: "mychar, running on the beach, sunset"

# mychar = è®­ç»ƒæ—¶çš„è§¦å‘è¯
```

**æ•ˆæœ**ï¼šæ‰€æœ‰å›¾åƒä¸­çš„è§’è‰²å¤–è§‚å®Œå…¨ä¸€è‡´

---

### æ¡ˆä¾‹3: å¤šLoRAæ··æ­

**ç›®æ ‡**ï¼šç”Ÿæˆèµ›åšæœ‹å…‹é£æ ¼çš„ç‰¹å®šè§’è‰²

**å·¥ä½œæµ**ï¼š
```
Load Checkpoint: sd_v1-5
  â†“
Load LoRA 1: cyberpunk_style.safetensors (0.7)
  â†“
Load LoRA 2: neon_lighting.safetensors (0.6)
  â†“
Load LoRA 3: character_alice.safetensors (1.0)
  â†“
Load LoRA 4: detail_enhancer.safetensors (0.4)
  â†“
Prompt: "alice, cyberpunk city, neon lights, night,
        rain, reflections, highly detailed"
```

**æ•ˆæœ**ï¼š
- cyberpunk_style: èµ›åšæœ‹å…‹æ•´ä½“æ°›å›´
- neon_lighting: éœ“è™¹ç¯å…‰æ•ˆæœ
- character_alice: ç‰¹å®šè§’è‰²å¤–è§‚
- detail_enhancer: æå‡ç»†èŠ‚è´¨é‡

---

### æ¡ˆä¾‹4: ä½¿ç”¨LoRAä¿®å¤é—®é¢˜

**ç›®æ ‡**ï¼šä¿®å¤AIç”Ÿæˆå›¾åƒä¸­çš„æ‰‹éƒ¨é—®é¢˜

**å·¥ä½œæµ**ï¼š
```
Load Checkpoint: realistic_vision
Load LoRA: bad_hands_fix.safetensors (0.8)

Prompt: "a portrait of a woman, showing hands,
        professional photography"
Negative: "bad hands, missing fingers, extra fingers"
```

**æ•ˆæœ**ï¼šæ˜¾è‘—å‡å°‘æ‰‹éƒ¨ç•¸å½¢é—®é¢˜

---

## ğŸ“ LoRAä½¿ç”¨åœºæ™¯æ€»ç»“

### 1. **å†…å®¹åˆ›ä½œ**

| åœºæ™¯ | LoRAç”¨é€” | ç¤ºä¾‹ |
|------|---------|------|
| æ¼«ç”»åˆ›ä½œ | ä¿æŒè§’è‰²ä¸€è‡´ | è¿è½½æ¼«ç”»ä¸»è§’ |
| æ’ç”»è®¾è®¡ | ç»Ÿä¸€é£æ ¼ | ç³»åˆ—æ’ç”»ä½œå“ |
| æ¦‚å¿µè®¾è®¡ | å¿«é€ŸåŸå‹ | æ¸¸æˆè§’è‰²æ¦‚å¿µå›¾ |
| å¹¿å‘Šè®¾è®¡ | å“ç‰Œå®šåˆ¶ | ç‰¹å®šäº§å“é£æ ¼ |

---

### 2. **è‰ºæœ¯æ¢ç´¢**

| åœºæ™¯ | LoRAç”¨é€” | ç¤ºä¾‹ |
|------|---------|------|
| é£æ ¼è¿ç§» | æ¨¡ä»¿å¤§å¸ˆ | æ¢µé«˜ã€è«å¥ˆé£æ ¼ |
| æ··åˆé£æ ¼ | åˆ›æ–°å®éªŒ | èµ›åšæœ‹å…‹+æµ®ä¸–ç»˜ |
| ä¸ªäººé£æ ¼ | å½¢æˆç‰¹è‰² | è‰ºæœ¯å®¶ç­¾åé£æ ¼ |

---

### 3. **å•†ä¸šåº”ç”¨**

| åœºæ™¯ | LoRAç”¨é€” | ç¤ºä¾‹ |
|------|---------|------|
| IPå¼€å‘ | è™šæ‹Ÿè§’è‰² | è™šæ‹Ÿä¸»æ’­å½¢è±¡ |
| äº§å“è®¾è®¡ | å¯è§†åŒ– | äº§å“æ•ˆæœå›¾ |
| è¥é”€ç´ æ | æ‰¹é‡ç”Ÿæˆ | å¹¿å‘Šç´ æåº“ |
| å®šåˆ¶æœåŠ¡ | ä¸ªæ€§åŒ– | å®¢æˆ·å®šåˆ¶å›¾åƒ |

---

### 4. **è´¨é‡ä¼˜åŒ–**

| åœºæ™¯ | LoRAç”¨é€” | ç¤ºä¾‹ |
|------|---------|------|
| ç»†èŠ‚å¢å¼º | æå‡è´¨é‡ | é«˜æ¸…æ”¾å¤§ |
| é—®é¢˜ä¿®å¤ | ä¿®å¤ç‘•ç–µ | æ‰‹éƒ¨ã€é¢éƒ¨ä¿®å¤ |
| ç‰¹æ•ˆæ·»åŠ  | å¢å¼ºæ•ˆæœ | å…‰æ•ˆã€è´¨æ„Ÿ |

---

## ğŸ“¦ ComfyUIä¸­çš„LoRAèŠ‚ç‚¹

### æ ¸å¿ƒèŠ‚ç‚¹

#### **1. Load LoRA**
```python
åŠŸèƒ½: åŠ è½½LoRAæ¨¡å‹å¹¶åº”ç”¨åˆ°ä¸»æ¨¡å‹

è¾“å…¥:
  - model (MODEL): åŸºç¡€æ¨¡å‹
  - clip (CLIP): CLIPæ–‡æœ¬ç¼–ç å™¨
  - lora_name (STRING): LoRAæ–‡ä»¶å
  - strength_model (FLOAT): UNetå¼ºåº¦ (0.0-2.0)
  - strength_clip (FLOAT): CLIPå¼ºåº¦ (0.0-2.0)

è¾“å‡º:
  - MODEL: åº”ç”¨LoRAåçš„æ¨¡å‹
  - CLIP: åº”ç”¨LoRAåçš„CLIP
```

#### **2. LoRA Loader (Advanced)**
```python
åŠŸèƒ½: é«˜çº§LoRAåŠ è½½ï¼Œæ”¯æŒæ›´å¤šå‚æ•°

é¢å¤–å‚æ•°:
  - dora_scale: DoRAç¼©æ”¾
  - weight_norm: æƒé‡å½’ä¸€åŒ–
```

---

### é«˜çº§èŠ‚ç‚¹

#### **3. LoRA Stacker**
```python
åŠŸèƒ½: æ‰¹é‡ç®¡ç†å¤šä¸ªLoRA

è¾“å…¥:
  - lora_stack (LIST): LoRAåˆ—è¡¨
  - lora_1_name, strength_1
  - lora_2_name, strength_2
  - ...

è¾“å‡º:
  - lora_stack: æ‰“åŒ…çš„LoRAé…ç½®
```

#### **4. LoRA Selector**
```python
åŠŸèƒ½: ä»å¤šä¸ªLoRAä¸­é€‰æ‹©ä¸€ä¸ª

è¾“å…¥:
  - lora_list: å¯ç”¨LoRAåˆ—è¡¨
  - selected_index: é€‰æ‹©ç´¢å¼•

è¾“å‡º:
  - selected_lora: é€‰ä¸­çš„LoRA
```

---

## ğŸ” LoRA vs å…¶ä»–æŠ€æœ¯

| æŠ€æœ¯ | æ–‡ä»¶å¤§å° | è®­ç»ƒæˆæœ¬ | æ•ˆæœå¼ºåº¦ | é€‚ç”¨åœºæ™¯ |
|------|---------|---------|---------|---------|
| **LoRA** | 10-200 MB | ä½ | ä¸­ | é£æ ¼ã€è§’è‰² |
| **Textual Inversion** | <1 MB | æä½ | å¼± | ç®€å•æ¦‚å¿µ |
| **Hypernetwork** | 50-500 MB | ä¸­ | å¼º | å¤æ‚é£æ ¼ |
| **å®Œæ•´å¾®è°ƒ** | 2-7 GB | æé«˜ | æå¼º | å®Œå…¨å®šåˆ¶ |
| **ControlNet** | 1-5 GB | N/A | å¼º | ç»“æ„æ§åˆ¶ |
| **IP-Adapter** | 200 MB-1 GB | N/A | ä¸­ | å›¾åƒå‚è€ƒ |

---

## ğŸ’¡ LoRAä½¿ç”¨æŠ€å·§

### 1. **å¼ºåº¦è°ƒèŠ‚åŸåˆ™**

```python
# ä¿å®ˆç­–ç•¥ï¼ˆæ¨èæ–°æ‰‹ï¼‰
strength_model = 0.6
strength_clip = 0.6

# å¦‚æœæ•ˆæœä¸æ˜æ˜¾ï¼Œé€æ­¥å¢åŠ 
strength = 0.6 â†’ 0.7 â†’ 0.8 â†’ 0.9

# å¦‚æœæ•ˆæœè¿‡å¼ºæˆ–å´©åï¼Œé€æ­¥é™ä½
strength = 0.8 â†’ 0.7 â†’ 0.6 â†’ 0.5
```

---

### 2. **LoRAå åŠ é¡ºåº**

```python
æ¨èé¡ºåºï¼š
1. é£æ ¼LoRA (åŸºç¡€æ°›å›´)
2. è§’è‰²LoRA (å…·ä½“å¯¹è±¡)
3. ç»†èŠ‚LoRA (è´¨é‡æå‡)

ç¤ºä¾‹ï¼š
  Checkpoint
    â†“
  Style LoRA (anime_style, 0.7)
    â†“
  Character LoRA (alice, 1.0)
    â†“
  Detail LoRA (detail_boost, 0.4)
```

---

### 3. **è§¦å‘è¯ä½¿ç”¨**

å¾ˆå¤šLoRAéœ€è¦ç‰¹å®šçš„**è§¦å‘è¯ï¼ˆTrigger Wordï¼‰**ï¼š

```python
# LoRA: ghibli_style.safetensors
# è§¦å‘è¯: "ghibli style"

æ­£ç¡®: "a cat, ghibli style, forest"
é”™è¯¯: "a cat in forest"  # å¿˜è®°è§¦å‘è¯ï¼Œæ•ˆæœä¸æ˜æ˜¾

# LoRA: character_alice.safetensors
# è§¦å‘è¯: "alice"

æ­£ç¡®: "alice, standing in garden"
é”™è¯¯: "a girl in garden"  # ä¸ä¼šç”Ÿæˆalice
```

**å¦‚ä½•æ‰¾åˆ°è§¦å‘è¯ï¼Ÿ**
- æŸ¥çœ‹LoRAä¸‹è½½é¡µé¢è¯´æ˜
- æŸ¥çœ‹LoRAæ–‡ä»¶çš„metadata
- åœ¨CivitAIç­‰ç½‘ç«™æŸ¥çœ‹ç¤ºä¾‹prompt

---

### 4. **é¿å…è¿‡æ‹Ÿåˆ**

```python
# ç—‡çŠ¶: æ‰€æœ‰ç”Ÿæˆå›¾åƒéƒ½å¾ˆç›¸ä¼¼
# åŸå› : LoRAå¼ºåº¦è¿‡é«˜æˆ–è®­ç»ƒè¿‡åº¦

è§£å†³æ–¹æ³•:
1. é™ä½å¼ºåº¦: 1.0 â†’ 0.7 â†’ 0.5
2. å¢åŠ promptå¤šæ ·æ€§
3. è°ƒæ•´CFG scale
4. ä½¿ç”¨ä¸åŒçš„seed
```

---

### 5. **ç»„åˆå®éªŒ**

```python
# å®éªŒä¸åŒç»„åˆæ‰¾åˆ°æœ€ä½³æ•ˆæœ

å®éªŒçŸ©é˜µ:
  - LoRA A (0.5, 0.7, 0.9)
  - LoRA B (0.5, 0.7, 0.9)
  - CFG (6, 7, 8, 9)
  - Steps (20, 30, 40)

ä½¿ç”¨XY PlotèŠ‚ç‚¹æ‰¹é‡æµ‹è¯•
```

---

## ğŸ“¥ è·å–LoRAèµ„æº

### ä¸»æµå¹³å°

#### **1. CivitAI** â­ æœ€å¤§çš„LoRAç¤¾åŒº
```
ç½‘å€: https://civitai.com
ç‰¹ç‚¹:
  - æ•°ä¸‡ä¸ªLoRAæ¨¡å‹
  - è¯¦ç»†çš„é¢„è§ˆå›¾å’Œå‚æ•°
  - ç¤¾åŒºè¯„åˆ†å’Œè¯„è®º
  - è®­ç»ƒæ•™ç¨‹
```

#### **2. HuggingFace**
```
ç½‘å€: https://huggingface.co/models
ç‰¹ç‚¹:
  - å®˜æ–¹å’Œå¼€æºLoRA
  - APIé›†æˆ
  - ç‰ˆæœ¬ç®¡ç†
```

#### **3. Tensor.Art**
```
ç½‘å€: https://tensor.art
ç‰¹ç‚¹:
  - ä¸­æ–‡ç¤¾åŒº
  - åœ¨çº¿ç”Ÿæˆ
  - LoRAåˆ†äº«
```

---

### LoRAåˆ†ç±»

**é£æ ¼ç±»**ï¼š
- anime_style
- oil_painting
- cyberpunk
- ghibli_style

**è§’è‰²ç±»**ï¼š
- character_specific
- celebrity_face
- fictional_character

**è´¨é‡ç±»**ï¼š
- detail_tweaker
- quality_boost
- face_fix

**æ•ˆæœç±»**ï¼š
- lighting_effects
- texture_enhancement
- color_grading

---

## ğŸ›¡ï¸ æ³¨æ„äº‹é¡¹

### 1. **ç‰ˆæƒé—®é¢˜**

âš ï¸ **é‡è¦**ï¼š
- ä½¿ç”¨ä»–äººè‚–åƒè®­ç»ƒLoRAéœ€è¦æˆæƒ
- å•†ä¸šä½¿ç”¨éœ€æ³¨æ„ç‰ˆæƒ
- å°Šé‡åŸåˆ›è‰ºæœ¯å®¶æƒç›Š

### 2. **è´¨é‡æ§åˆ¶**

```python
# ä½è´¨é‡LoRAçš„ç‰¹å¾
âŒ è®­ç»ƒæ•°æ®ä¸è¶³ (<10å¼ )
âŒ è®­ç»ƒå‚æ•°ä¸å½“
âŒ è¿‡æ‹Ÿåˆä¸¥é‡
âŒ ä¸åŸºç¡€æ¨¡å‹ä¸åŒ¹é…

# é«˜è´¨é‡LoRAçš„ç‰¹å¾
âœ… å……è¶³çš„è®­ç»ƒæ•°æ® (50-200å¼ )
âœ… ç²¾å¿ƒæ ‡æ³¨çš„caption
âœ… é€‚å½“çš„è®­ç»ƒè½®æ¬¡
âœ… æ¸…æ™°çš„è§¦å‘è¯
```

### 3. **å…¼å®¹æ€§**

```python
# LoRAä¸åŸºç¡€æ¨¡å‹çš„åŒ¹é…
SD 1.5 LoRA â†’ åªèƒ½ç”¨äºSD 1.5
SDXL LoRA â†’ åªèƒ½ç”¨äºSDXL
SD 3 LoRA â†’ åªèƒ½ç”¨äºSD 3

# ä¸åŒ¹é…ä¼šå¯¼è‡´:
- åŠ è½½å¤±è´¥
- æ•ˆæœå¼‚å¸¸
- å´©åå›¾åƒ
```

---

## ğŸ“ å­¦ä¹ èµ„æº

### è®­ç»ƒæ•™ç¨‹

**æ¨èå·¥å…·**ï¼š
- **Kohya_ss** - æœ€æµè¡Œçš„LoRAè®­ç»ƒå·¥å…·
- **EveryDream2** - æ›´ç®€å•çš„è®­ç»ƒå·¥å…·
- **OneTrainer** - ä¸€ä½“åŒ–è®­ç»ƒæ–¹æ¡ˆ

**å­¦ä¹ è·¯å¾„**ï¼š
1. äº†è§£åŸºç¡€æ¦‚å¿µ
2. å‡†å¤‡è®­ç»ƒæ•°æ®é›†
3. å­¦ä¹ ä½¿ç”¨è®­ç»ƒå·¥å…·
4. è°ƒæ•´è®­ç»ƒå‚æ•°
5. æµ‹è¯•å’Œä¼˜åŒ–

### ç¤¾åŒºèµ„æº

- **r/StableDiffusion** - Redditç¤¾åŒº
- **CivitAI Forums** - LoRAè®¨è®º
- **DiscordæœåŠ¡å™¨** - å®æ—¶äº¤æµ
- **YouTubeæ•™ç¨‹** - è§†é¢‘æ•™å­¦

---

## ğŸ“Š å¿«é€Ÿå‚è€ƒå¡

### LoRAå¼ºåº¦é€ŸæŸ¥è¡¨

| ç”¨é€” | strength_model | strength_clip |
|------|---------------|---------------|
| è½»å¾®é£æ ¼è°ƒæ•´ | 0.3-0.5 | 0.3-0.5 |
| å¹³è¡¡æ•ˆæœï¼ˆæ¨èï¼‰ | 0.6-0.8 | 0.6-0.8 |
| å¼ºé£æ ¼åŒ– | 0.9-1.0 | 0.9-1.0 |
| ä»…å½±å“å›¾åƒ | 0.7 | 0.0 |
| ä»…å½±å“æç¤ºè¯ç†è§£ | 0.0 | 0.7 |

### å¸¸è§é—®é¢˜è§£å†³

| é—®é¢˜ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ³• |
|------|---------|---------|
| LoRAæ— æ•ˆæœ | å¼ºåº¦å¤ªä½/å¿˜è®°è§¦å‘è¯ | å¢åŠ å¼ºåº¦/æ·»åŠ è§¦å‘è¯ |
| å›¾åƒå´©å | å¼ºåº¦è¿‡é«˜/LoRAå†²çª | é™ä½å¼ºåº¦/ç§»é™¤å†²çªLoRA |
| é£æ ¼ä¸æ˜æ˜¾ | ä¸åŸºç¡€æ¨¡å‹ä¸åŒ¹é… | æ›´æ¢åŸºç¡€æ¨¡å‹ |
| è§’è‰²ä¸ä¸€è‡´ | LoRAè´¨é‡å·® | ä½¿ç”¨æ›´é«˜è´¨é‡çš„LoRA |

---

## ğŸ¯ æ€»ç»“

### LoRAçš„æ ¸å¿ƒä»·å€¼

âœ… **é«˜æ•ˆ**ï¼šå°æ–‡ä»¶ï¼Œå¿«é€Ÿè®­ç»ƒ
âœ… **çµæ´»**ï¼šå¯å åŠ ï¼Œå¯ç»„åˆ
âœ… **ç»æµ**ï¼šä½æˆæœ¬å®šåˆ¶
âœ… **åˆ›æ–°**ï¼šæ— é™å¯èƒ½æ€§

### åœ¨ComfyUIä¸­çš„åº”ç”¨

```
LoRAæ˜¯ComfyUIå·¥ä½œæµä¸­çš„"è°ƒå‘³æ–™"ï¼š
- åŸºç¡€æ¨¡å‹æ˜¯"ä¸»èœ"
- LoRAæ˜¯"è°ƒæ–™"
- é€šè¿‡ä¸åŒæ­é…åˆ›é€ æ— é™å¯èƒ½
```

### å­¦ä¹ å»ºè®®

1. **ä»ä½¿ç”¨å¼€å§‹**ï¼šå…ˆç”¨ç°æˆLoRAä½“éªŒæ•ˆæœ
2. **ç†è§£åŸç†**ï¼šäº†è§£LoRAå¦‚ä½•å·¥ä½œ
3. **å®éªŒç»„åˆ**ï¼šå°è¯•ä¸åŒLoRAæ­é…
4. **å­¦ä¹ è®­ç»ƒ**ï¼šæŒæ¡è‡ªå·±è®­ç»ƒLoRA
5. **åˆ†äº«äº¤æµ**ï¼šå‚ä¸ç¤¾åŒºï¼ŒæŒç»­è¿›æ­¥

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æ›´æ–°æ—¥æœŸ**: 2025-11-10
**é€‚ç”¨ç‰ˆæœ¬**: ComfyUI v0.3.67+, SD 1.5/SDXL/SD3

---

## ğŸ“š å»¶ä¼¸é˜…è¯»

- **LoRAåŸå§‹è®ºæ–‡**: [LoRA: Low-Rank Adaptation of Large Language Models](https://arxiv.org/abs/2106.09685)
- **è®­ç»ƒæ•™ç¨‹**: CivitAI Education Section
- **ComfyUIæ–‡æ¡£**: https://docs.comfy.org
